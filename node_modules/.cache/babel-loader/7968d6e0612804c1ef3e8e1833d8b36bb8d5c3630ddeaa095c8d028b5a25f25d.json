{"ast":null,"code":"import { fetchLabel, stanTarget } from '../../function-backand-editor.js';\nimport { set, set2, ports } from '../../function-row.js';\nimport { hade } from '../../function-constructor-code.js';\nimport { closeError } from '../../Alert-Errors/function-error.js';\nexport function listLabelCode(namelabel) {\n  document.getElementById('select-label-name').innerHTML = '';\n  let selectLabel = document.getElementById('select-label-name');\n  selectLabel.append(new Option());\n  for (let i = 0; i < namelabel.length; i++) {\n    //? Присвоим i каждое имя по очереди\n    let name = namelabel[i].name; //? Берём параметр имени без номера\n    name = name.replace('.ini', '');\n    let newOption = new Option(name, name); //? Создаём новый Option\n    selectLabel.append(newOption); //? Вставляем в селект новый Option\n  }\n  ;\n}\n;\nexport async function addCodeLabel() {\n  let namelabel = document.getElementById('select-label-name').value;\n  let codeLabel = await fetchLabel(namelabel);\n  let code = await parsingCodeLabel(codeLabel);\n  document.getElementById('input-code-label').value = code;\n}\n;\nexport async function editorLabelCode() {\n  let error = document.getElementById('errors');\n  let errorText = document.getElementById('text-error');\n  let labelCode = document.getElementById('input-code-label').value;\n  let namelabel = document.getElementById('select-label-name').value + '.ini';\n  let stan = stanTarget();\n  try {\n    await fetch(`http://10.23.${set[stan]}.${set2}:${ports}/label/Changelabel?labelName=${encodeURI(namelabel)}`, {\n      method: 'post',\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        \"Content-type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        body: labelCode\n      })\n    });\n  } catch {\n    errorText.innerText = 'Ошибка:\\nНе удалось сохранить Шаблон!\\nОбратитесь в Службу Поддержки по номеру: 1032.';\n    errorText.style.display = 'block';\n    error.style.display = 'block';\n  }\n  ;\n  closeError();\n  document.getElementById('select-label-name').value = '';\n  document.getElementById('input-code-label').value = '';\n}\n;\nexport async function deleteLabel() {\n  let selectLabel = document.getElementById('select-label-name').value;\n  let error = document.getElementById('errors');\n  let errorText = document.getElementById('text-error');\n  selectLabel = selectLabel + '.ini';\n  let stan = stanTarget();\n  try {\n    await fetch(`http://10.23.${set[stan]}.${set2}:${ports}/Label/LabelDelete?fileName=` + selectLabel, {\n      method: 'DELETE',\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        \"Content-type\": \"application/json\"\n      }\n    });\n  } catch {\n    errorText.innerText = 'Ошибка:\\nНет связи с базой данных!\\nОбратитесь в Службу Поддержки по номеру: 1032.';\n    errorText.style.display = 'block';\n    error.style.display = 'block';\n    return;\n  }\n  ;\n  closeError();\n  document.getElementById('select-label-name').value = '';\n  document.getElementById('input-code-label').value = '';\n}\n;\nasync function parsingCodeLabel(codelabel) {\n  let code = '';\n  let botton = \"^XZ\" + '\\n' + \"^XA^PON^LT0^PW1200^LH0,0^XZ\";\n  codelabel = codelabel.replace(/.*?\\^FO/, '^FO');\n  for (let i of codelabel) {\n    if (!codelabel) {\n      break;\n    } else if (!codelabel.includes('^FO')) {\n      break;\n    } else {\n      let stringCode = /\\^FO\\w+?.*?\\^FS/m.exec(codelabel)[0];\n      if (stringCode.includes('^GFA') || stringCode.includes('^A@R')) {\n        code = code + '\\n' + stringCode;\n        codelabel = codelabel.replace(stringCode, '');\n      } else if (stringCode.includes('^BY')) {\n        code = code + '\\n' + stringCode + '\\n';\n        codelabel = codelabel.replace(stringCode, '');\n      }\n      ;\n    }\n    ;\n  }\n  ;\n  let header = await hade();\n  for (let h of header) {\n    if (header.includes('(NL)')) {\n      header = header.replace('(NL)', '\\n');\n    } else {\n      break;\n    }\n    ;\n  }\n  ;\n  code = header + code + botton;\n  return code;\n}\n;","map":{"version":3,"names":["fetchLabel","stanTarget","set","set2","ports","hade","closeError","listLabelCode","namelabel","document","getElementById","innerHTML","selectLabel","append","Option","i","length","name","replace","newOption","addCodeLabel","value","codeLabel","code","parsingCodeLabel","editorLabelCode","error","errorText","labelCode","stan","fetch","encodeURI","method","headers","body","JSON","stringify","innerText","style","display","deleteLabel","codelabel","botton","includes","stringCode","exec","header","h"],"sources":["C:/Users/Tror/Desktop/Project/Label-Editor-React/src/Components/Sections/Labels/function-label-logo-add.js"],"sourcesContent":["import { fetchLabel, stanTarget } from '../../function-backand-editor.js'\r\nimport { set, set2, ports  } from '../../function-row.js';\r\nimport { hade } from '../../function-constructor-code.js';\r\nimport { closeError } from '../../Alert-Errors/function-error.js';\r\n\r\nexport function listLabelCode(namelabel) {\r\n    document.getElementById('select-label-name').innerHTML = '';\r\n    let selectLabel = document.getElementById('select-label-name');\r\n    selectLabel.append(new Option);\r\n    for (let i = 0; i < namelabel.length; i++) {                                         //? Присвоим i каждое имя по очереди\r\n        let name = namelabel[i].name;                                                    //? Берём параметр имени без номера\r\n        name = name.replace('.ini', '');\r\n        let newOption = new Option(name, name);                                          //? Создаём новый Option\r\n        selectLabel.append(newOption);                                                   //? Вставляем в селект новый Option\r\n    };\r\n};\r\n\r\nexport async function addCodeLabel() {\r\n    let namelabel = document.getElementById('select-label-name').value;\r\n    let codeLabel = await fetchLabel(namelabel);\r\n    let code = await parsingCodeLabel(codeLabel);\r\n    document.getElementById('input-code-label').value = code;\r\n};\r\n\r\nexport async function editorLabelCode() {\r\n    let error = document.getElementById('errors');\r\n    let errorText = document.getElementById('text-error');\r\n    let labelCode = document.getElementById('input-code-label').value;\r\n    let namelabel = document.getElementById('select-label-name').value + '.ini';\r\n    let stan = stanTarget();\r\n    try {\r\n        await fetch(`http://10.23.${set[stan]}.${set2}:${ports}/label/Changelabel?labelName=${encodeURI(namelabel)}`,\r\n            {\r\n                method: 'post',\r\n                headers: {\r\n                    'Access-Control-Allow-Origin': '*',\r\n                    \"Content-type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({ body: labelCode })\r\n            });\r\n    } catch {\r\n        errorText.innerText = 'Ошибка:\\nНе удалось сохранить Шаблон!\\nОбратитесь в Службу Поддержки по номеру: 1032.';\r\n        errorText.style.display = 'block';\r\n        error.style.display = 'block';\r\n    };\r\n    closeError();\r\n    document.getElementById('select-label-name').value = '';\r\n    document.getElementById('input-code-label').value = '';\r\n};\r\n\r\nexport async function deleteLabel() {\r\n    let selectLabel = document.getElementById('select-label-name').value;\r\n    let error = document.getElementById('errors');\r\n    let errorText = document.getElementById('text-error');\r\n    selectLabel = selectLabel + '.ini';\r\n    let stan = stanTarget();\r\n    try {\r\n        await fetch(`http://10.23.${set[stan]}.${set2}:${ports}/Label/LabelDelete?fileName=` + selectLabel, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Access-Control-Allow-Origin': '*',\r\n                \"Content-type\": \"application/json\"\r\n            },\r\n        });\r\n    } catch {\r\n        errorText.innerText = 'Ошибка:\\nНет связи с базой данных!\\nОбратитесь в Службу Поддержки по номеру: 1032.';\r\n        errorText.style.display = 'block';\r\n        error.style.display = 'block';\r\n        return;\r\n    };\r\n    closeError();\r\n    document.getElementById('select-label-name').value = '';\r\n    document.getElementById('input-code-label').value = '';\r\n};\r\n\r\nasync function parsingCodeLabel(codelabel) {\r\n    let code = '';\r\n    let botton = \"^XZ\" + '\\n' + \"^XA^PON^LT0^PW1200^LH0,0^XZ\";\r\n    codelabel = codelabel.replace(/.*?\\^FO/, '^FO');\r\n    for (let i of codelabel) {\r\n        if (!codelabel) {\r\n            break;\r\n        } else if (!codelabel.includes('^FO')) {\r\n            break;\r\n        } else {\r\n            let stringCode = /\\^FO\\w+?.*?\\^FS/m.exec(codelabel)[0];\r\n            if (stringCode.includes('^GFA') || stringCode.includes('^A@R')) {\r\n                code = code + '\\n' + stringCode;\r\n                codelabel = codelabel.replace(stringCode, '');\r\n            } else if (stringCode.includes('^BY')) {\r\n                code = code + '\\n' + stringCode + '\\n';\r\n                codelabel = codelabel.replace(stringCode, '');\r\n            };\r\n        };\r\n    };\r\n    let header = await hade();\r\n    for (let h of header) {\r\n        if (header.includes('(NL)')) {\r\n            header = header.replace('(NL)', '\\n');\r\n        } else {\r\n            break;\r\n        };\r\n    };\r\n    code = header + code + botton;\r\n    return (code);\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}